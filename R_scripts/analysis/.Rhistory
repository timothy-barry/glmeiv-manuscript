# load the results
gasp_result_dir <- paste0(.get_config_path("LOCAL_GLMEIV_DATA_DIR"), "public/gasperini/results/")
glmeiv_res <- readRDS(paste0(gasp_result_dir, "result_glmeiv.rds"))
glmeiv_res
glmeiv_res <- readRDS(paste0(gasp_result_dir, "result_thresholding.rds"))
head(glmeiv_res)
glmeiv_res
# load the results
gasp_result_dir <- paste0(.get_config_path("LOCAL_GLMEIV_DATA_DIR"), "public/gasperini/results/")
thresh_res <- readRDS(paste0(gasp_result_dir, "result_thresholding.rds"))
rm(glmeiv_res)
head(thresh_res)
library(magrittr)
thresh_res$threshold %>% table()
thresh_res$site_type
thresh_res$site_type %>% table()
# study how choice of threshold influences results on Gasperini self TSS pairs
thresh_res_pc <- thresh_res %>% dplyr::filter(site_type == "selfTSS")
thresh_res_pc
thresh_res_pc
# study how choice of threshold influences results on Gasperini self TSS pairs
thresh_res_pc <- thresh_res %>% dplyr::filter(site_type == "selfTSS", parameter == "m_perturbation")
thresh_res_pc
# Question 1. How do thresh = 1 and thresh = 5 compare on estimation?
thresh_res_pc %>% dplyr::select(target, value, threshold, pair_id)
?pivot_wider
# Question 1. How do thresh = 1 and thresh = 5 compare on estimation?
thresh_res_pc %>% dplyr::select(target, value, threshold, pair_id) %>%
tidyr::pivot_wider(id_cols = "pair_id", names_from = "threshold", values_from = "value")
# Question 1. How do thresh = 1 and thresh = 5 compare on estimation?
thresh_res_pc %>% dplyr::select(target, value, threshold, pair_id) %>%
tidyr::pivot_wider(id_cols = c("pair_id", "target"), names_from = "threshold", values_from = "value")
thresh_res_pc
# Question 1. How do thresh = 1 and thresh = 5 compare on estimation?
thresh_res_pc %>% dplyr::select(target, value, threshold, pair_id) %>%
tidyr::pivot_wider(id_cols = c("pair_id", "target"),
names_from = "threshold",
values_from = "value", names_prefix = "threshold")
# Question 1. How do thresh = 1 and thresh = 5 compare on estimation?
thresh_res_pc %>% dplyr::select(target, value, threshold, pair_id) %>%
tidyr::pivot_wider(id_cols = c("pair_id", "target"),
names_from = "threshold",
values_from = "value", names_prefix = "threshold_")
# Question 1. How do thresh = 1 and thresh = 5 compare on estimation?
thresh_res_pc_wide <- thresh_res_pc %>% dplyr::select(target, value, threshold, pair_id) %>%
tidyr::pivot_wider(id_cols = c("pair_id", "target"),
names_from = "threshold",
values_from = "value", names_prefix = "threshold_")
thresh_res_pc_wide
